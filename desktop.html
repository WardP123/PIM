<!doctype html>
<html>
<head>
<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Desktop</title>
<link href="desktopcss.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
	<div id="header">
		<img src="klassetourzwart.png"></div>
	</div>
	<div class="container">
		<div class = "users">
			<div class = "usertitle"> Gebruikers </div>
			<div class = "total"> 6 Gebruikers totaal </div>
		<div class = "user">
			<div class = "name" onclick="delete_user_popup(innerHTML)"> Matthijs Blaauw </div>
		</div>
		<div class = "user">
			<div class = "name" onclick="delete_user_popup(innerHTML)"> Pieter de Vries </div>
		</div>
		<div class = "user">
			<div class = "name" onclick="delete_user_popup(innerHTML)"> Klaasje De Boom </div>
		</div>
		<div class = "user">
			<div class = "name" onclick="delete_user_popup(innerHTML)"> Jantje van Berkumveld </div>
		</div>
		<div class = "user">
			<div class = "name" onclick="delete_user_popup(innerHTML)"> Indy van der Schaap </div>
		</div>
		<div class = "user">
			<div class = "name" onclick="delete_user_popup(innerHTML)"> Noah van der Brink </div>
		</div>
		</div>
		<div class="announcements">
			<div class="announcementstitle"> Meldingen </div>
			<div id = "newannouncement" class="newannouncement"> Nieuwe Melding <br> <span class="plusannouncement"> + </span> </div></button>
		<div class="announcement">
		<div class="new"></div>
		<div class="time">1h geleden</div>
		<div class="title" id="announcementtitle">
			Vergeet niet te doen!
		</div>
		<div class="description">
			Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse sit amet cursus diam. Pellentesque sed felis accumsan, blandit nibh sit amet, mattis lacus. Vestibulum vehicula quis urna sed efficitur. Praesent ac justo erat. Pellentesque et nunc id metus finibus pretium. Duis id malesuada neque. Cras vestibulum augue luctus dolor imperdiet consectetur. Mauris vel lorem at arcu blandit vulputate. Sed ac mauris sagittis, elementum eros id, porta mauris. 
			
		</div>
			<div class="readed"> Gelezen door 6 deelnemers </div>
			<div class="iconsan">
			<img src="delete.png" onclick="delete_announcement_popup(this.parentElement.parentElement)">
			<img src="edit.png">
		</div>
		</div>
		<div class="announcement">
		<div class="new"></div>
		<div class="time">1h geleden</div>
		<div class="title">
			Vergeet niet te doen!
		</div>
		<div class="description">
			Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse sit amet cursus diam. Pellentesque sed felis accumsan, blandit nibh sit amet, mattis lacus. Vestibulum vehicula 
			</div>
			<div class="readed"> Gelezen door 6 deelnemers </div>
			<div class="iconsan">
			<img src="delete.png">
			<img src="edit.png">
		</div>
			</div>
			<div class="announcement">
		<div class="new"></div>
		<div class="time">1h geleden</div>
		<div class="title">
			Vergeet niet te doen!
		</div>
		<div class="description">
			Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse sit amet cursus diam. 
		</div>
		<div class="readed"> Gelezen door 6 deelnemers </div>
				<div class="iconsan">
			<img src="delete.png">
			<img src="edit.png">
		</div>
		</div>
		<div class="announcement">
		<div class="new"></div>
		<div class="time">1h geleden</div>
		<div class="title">
			Vergeet niet te doen!
		</div>
		<div class="description">
			Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse sit amet cursus diam. Pellentesque sed felis accumsan, blandit nibh sit amet, mattis lacus. Vestibulum vehicula quis urna sed efficitur. Praesent ac justo erat. Pellentesque et nunc id metus finibus pretium. Duis id malesuada neque. Cras vestibulum augue luctus dolor imperdiet consectetur. Mauris vel lorem at arcu blandit vulputate. Sed ac mauris sagittis, elementum eros id, porta mauris. 
		
		</div>
			<div class="readed"> Gelezen door 6 deelnemers </div>
			<div class="iconsan">
			<img src="delete.png">
			<img src="edit.png">
		</div>
		</div>
		</div>
		<div class="allevents">
			<div class = "bottons">
				<div class="newappointmentcontainer"> <div id="newappointment" class="newappointment"> <br> Nieuwe Afspraak <br><span class="plusappointment"> +</span></div> </div>
				<div class="newquizcontainer"><div class="newquiz"> <br>  Nieuwe Quiz <br><span class="plusquiz"> +</span></div></div>
			</div>
		<div class="events">
	<div class="appointment">
		<div class="time">
			9:00
		</div>
		<div class="title">
			Vertrek bus
		</div><br>
		<div class="description">
			Hoorn busstation
		</div>
		<div class="icons">
			<img src="delete.png">
			<img src="edit.png">
		</div>
	</div>
	<div class="appointment">
		<div class="time">
			10:30
		</div>
		<div class="title">
			Verzamelen
		</div>
		<div class="description">
			Gadarobe is waar we afspr
		</div>
		<div class="icons">
			<img src="delete.png">
			<img src="edit.png">
		</div>
		</div>
	<div class="appointment">
		<div class="time">
			11:00
		</div>
		<div class="title">
			Start rondleiding
		</div>
		<div class="description">
			rijksmuseum
		</div>
		<div class="icons">
			<img src="delete.png">
			<img src="edit.png">
		</div>
	</div>
	<div class="quiz">
		<div class="time">
			13:00
		</div>
		<div class="title">
			Quiz 1
		</div>
		<div class="icons">
			<img src="delete.png">
			<img src="edit.png">
		</div>
	</div>
	<div class="appointment">
		<div class="time">
			14:00
		</div>
		<div class="title">
			Lunch
		</div>
		<div class="description">
			Openbare kantine bij aula
		</div>
		<div class="icons">
			<img src="delete.png">
			<img src="edit.png">
		</div>
	</div>
	<div class="quiz">
		<div class="time">
			15:00
		</div>
		<div class="title">
			Quiz 2
		</div>
		<div class="icons">
			<img src="delete.png">
			<img src="edit.png">
		</div>
	</div>
	<div class="quiz">
		<div class="time">
			16:00
		</div>
		<div class="title">
			Quiz 3
		</div>
		<div class="icons">
			<img src="delete.png">
			<img src="edit.png">
		</div>
	</div>
	<div class="appointment">
		<div class="time">
			14:00
		</div>
		<div class="title">
			Vertrek
		</div>
		<div class="description">
			Openbare kantine bij aula
		</div>
		<div class="icons">
			<img src="delete.png">
			<img src="edit.png">
		</div>
	</div>
			</div>
		</div>
	</div>

	<!-- The Modal -->
	<div id="newannouncementmodal" class="modal">

	  <!-- Modal content -->
	  <div class="modal-content">
		<span class="closean">&times;</span>
		<div class="title">Nieuwe Melding</div>
			<form>
				Titel: <br>
				<input type="text" id="antitleintext"> <br>
				Inhoud: <br>
				<textarea rows="4" cols="50" name="comment" id="announcementdescription" form="usrform"></textarea> <br>
				<input type="button" id="announcementsendbutton" value="Submit" onclick="new_announcement()">
			</form>
	  </div>
	</div>
	<div id="newappointmentmodal" class="modal">

	  <!-- Modal content -->
	  <div class="modal-content">
		<span class="closeap">&times;</span>
		<div class="title">Nieuwe Afspraak</div>
			<form>
				Type: <br>
				<input type="text" id="aptype"> <br>
				Titel: <br>
				<input type="text" id="aptitleintext"> <br>
				Inhoud: <br>
				<input type="text" id="apdescription"> <br>
				Tijd: <br>
				<input type="time" name="comment" id="appointmenttime"><br>
				<input type="button" id="appointmentsendbutton" value="Submit" onclick="new_appointment()">
			</form>
	  </div>
	</div>
	
	<div id="deleteusermodal" class="modal">

	  <!-- Modal content -->
	  <div class="modal-content">
		<span class="closeap" onclick="close_span_user()">&times;</span>
		<div class="title">Groepslid verwijderen</div>
			<form>
				<div>Weet u zeker dat u <span id="insertname"></span> wil verwijderen?</div><br>
				<input type="button" id="deleteuserbutton" value="Ja" onclick="delete_user()">
				<input type="button" value="Nee" onclick="close_span_user()">
			</form>
	  </div>
	</div>
	
	<div id="deleteannouncementmodal" class="modal">

	  <!-- Modal content -->
	  <div class="modal-content">
		<span class="closeap" onclick="close_span_announcement()">&times;</span>
		<div class="title">Melding verwijderen</div>
			<form>
				<div>Weet u zeker dat u de melding "<span id="inserttitle"></span>" wil verwijderen?</div><br>
				<input type="button" id="deleteannouncementbutton" value="Ja" onclick="delete_announcement()">
				<input type="button" value="Nee" onclick="close_span_announcement()">
			</form>
	  </div>
	</div>
	
<script>
// Get the modal
var modalan = document.getElementById('newannouncementmodal');

// Get the button that opens the modal
var btnan = document.getElementById("newannouncement");

// Get the <span> element that closes the modal
var spanan = document.getElementsByClassName("closean")[0];

// When the user clicks the button, open the modal 
btnan.onclick = function() {
    modalan.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
spanan.onclick = function() {
    modalan.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modalan) {
        modalan.style.display = "none";
    }
}
var modalap = document.getElementById('newappointmentmodal');

// Get the button that opens the modal
var btnap = document.getElementById("newappointment");

// Get the <span> element that closes the modal
var spanap = document.getElementsByClassName("closeap")[0];

// When the user clicks the button, open the modal 
btnap.onclick = function() {
    modalap.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
spanap.onclick = function() {
    modalap.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modalap) {
        modalap.style.display = "none";
    }
}

function new_announcement(){
	var announcementtitle_local = document.getElementById("antitleintext").value;
	var announcementdescription_local = document.getElementById("announcementdescription").value;
	
	if (announcementtitle_local == "" && announcementdescription_local == ""){
		alert('Geef de announcement een titel en inhoud.')
	}
	else if (announcementtitle_local == ""){
		alert('Geef de announcement een titel.')
	}
	else if (announcementdescription_local == ""){
		alert('Geef de announcement een inhoud.')
	}
	
	else {
		$.ajax({
			url: "http://localhost:8081/new-announcement",
			type: 'POST',
			data: JSON.stringify({ gameid: '12', announcementtitle: announcementtitle_local, announcementdescription: announcementdescription_local }),
			contentType: "application/json; charset=utf-8",
			dataType: "json",
			async: true,
			success: function(result) {
				alert("Announcement aanmaken gelukt");
			},
			error: function(data) {
				alert("Announcement aanmaken mislukt.");
			}
		});
	}
}

function new_appointment(){
	var appointmenttype_local = document.getElementById("aptype").value;
	var appointmentlocation_local = document.getElementById("aptitleintext").value;
	var appointmentdescription_local = document.getElementById("apdescription").value;
	var appointmenttime_local = document.getElementById("appointmenttime").value;
	
	if (appointmenttype_local == ""){
		alert('Kies een type afspraak: appointment of quiz.')
	}
	if (appointmentlocation_local == "" && appointmenttime_local == ""){
		alert('Geef de afspraak een titel en tijd.')
	}
	else if (appointmentlocation_local == ""){
		alert('Geef de afspraak een titel.')
	}
	else if (appointmenttime_local == ""){
		alert('Geef de afspraak een tijd.')
	}
	
	else {
		$.ajax({
			url: "http://localhost:8081/new-appointment",
			type: 'POST',
			data: JSON.stringify({ 'gameid': '12', 'type': appointmenttype_local, 'title': appointmentlocation_local, 'description': appointmentdescription_local, 'time': appointmenttime_local }),
			contentType: "application/json; charset=utf-8",
			dataType: "json",
			async: true,
			success: function(result) {
				alert("Afspraak aanmaken gelukt");
			},
			error: function(data) {
				alert("Afspraak aanmaken mislukt.");
			}
		});
	}
}

function delete_user_popup(innerHTML){
	document.getElementById("insertname").innerHTML = innerHTML;
	var modalap = document.getElementById('deleteusermodal');
	modalap.style.display = "block";
}

function close_span_user(){
	var modalap = document.getElementById('deleteusermodal');
	modalap.style.display = "none";
}


function delete_user(){
	name = document.getElementById("insertname").innerHTML;
	gameid = 12;
	
	$.ajax({
		url: "http://localhost:8081/delete-user",
        type: 'POST',
		data: JSON.stringify({ gameid: gameid, username: name}),
		contentType: "application/json; charset=utf-8",
		dataType: "json",
        async: true,
        success: function(result) {
			alert('Groepslid verwijderd.')
		},
        error: function(data) {
			alert('Groepslid verwijderen mislukt.')
        }
});	
}

function delete_announcement_popup(parentdiv){
	title = parentdiv.childNodes[5].innerHTML;
 	document.getElementById("inserttitle").innerHTML = title;
	var modalap = document.getElementById('deleteannouncementmodal');
	modalap.style.display = "block";
}

function close_span_announcement(){
	var modalap = document.getElementById('deleteannouncementmodal');
	modalap.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
	var modalap = document.getElementById('deleteannouncementmodal');
	var modalap2 = document.getElementById('deleteusermodal');
    if (event.target == modalap) {
        modalap.style.display = "none";
    }
	if (event.target == modalap2) {
		modalap2.style.display = "none";
	}
}

</script>
</body>
</html>
